<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gemini Free - JS Browser</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        transition: background 0.3s, color 0.3s;
        min-height: 100vh;
    }

    .card {
        border-radius: 20px;
        border: none;
        transition: background 0.3s, color 0.3s;
    }

    .btn-primary {
        background: linear-gradient(90deg, #1976d2, #42a5f5);
        border: none;
        font-weight: 600;
        letter-spacing: 0.5px;
        transition: 0.3s ease;
    }

    .btn-primary:hover {
        background: linear-gradient(90deg, #1565c0, #1e88e5);
        transform: scale(1.02);
    }

    .spinner-border {
        width: 2rem;
        height: 2rem;
        color: #42a5f5;
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in-out forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    textarea {
        resize: none;
        border-radius: 10px;
        transition: background 0.3s, color 0.3s, border 0.3s;
    }

    #pergunta, #resposta {
        border-radius: 10px;
        transition: background 0.3s, color 0.3s, border 0.3s;
    }

    /* Dark Theme */
    body.dark {
        background: #121212;
        color: #e0e0e0;
    }
    body.dark .card {
        background: #1e1e1e;
        color: #e0e0e0;
    }
    body.dark textarea {
        background: #2c2c2c;
        color: #e0e0e0;
        border: 1px solid #444;
    }
    body.dark #pergunta, body.dark #resposta {
        background: #2c2c2c;
        color: #e0e0e0;
        border: 1px solid #444;
    }

    /* Light Theme */
    body.light {
        background: #e3f2fd;
        color: #212529;
    }
    body.light .card {
        background: #fff;
        color: #212529;
    }
    body.light textarea {
        background: #fff;
        color: #212529;
        border: 1px solid #ccc;
    }
    body.light #pergunta, body.light #resposta {
        color: #212529;
        border: 1px solid #ccc;
    }
</style>
</head>
<body class="dark">

<div class="container py-5">
    <div class="card shadow-lg p-4 mx-auto" style="max-width: 700px;">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="text-info fw-bold">ü§ñ Gemini Free API</h3>
            <button id="toggleTheme" class="btn btn-outline-light btn-sm">üåô Dark/Light</button>
        </div>

        <div class="mb-3">
            <label for="prompt" class="form-label fw-semibold">Pergunta:</label>
            <textarea id="prompt" class="form-control" rows="4" placeholder="Ex: Explique o que √© intelig√™ncia artificial"></textarea>
        </div>

        <div class="d-grid mb-4">
            <button id="btnEnviar" class="btn btn-primary btn-lg">
                <span id="btnTexto">Enviar</span>
                <div id="btnSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status"></div>
            </button>
        </div>

        <div id="pergunta" class="alert alert-primary fade-in" style="display:none; white-space: pre-wrap;"></div>
        <div id="resposta" class="alert alert-success fade-in" style="display:none; white-space: pre-wrap;"></div>
    </div>
</div>

<script>
const API_KEY = "AIzaSyBAoh90avSaI9Jsi6lDq9WewLLrFCKvgoE";

const btnEnviar = document.getElementById("btnEnviar");
const promptInput = document.getElementById("prompt");
const respostaDiv = document.getElementById("resposta");
const perguntaDiv = document.getElementById("pergunta");
const btnTexto = document.getElementById("btnTexto");
const btnSpinner = document.getElementById("btnSpinner");
const toggleTheme = document.getElementById("toggleTheme");

// Alternar tema Dark/Light
toggleTheme.addEventListener("click", () => {
    if(document.body.classList.contains("dark")){
        document.body.classList.remove("dark");
        document.body.classList.add("light");
        toggleTheme.classList.replace("btn-outline-light", "btn-outline-dark");
    } else {
        document.body.classList.remove("light");
        document.body.classList.add("dark");
        toggleTheme.classList.replace("btn-outline-dark", "btn-outline-light");
    }
});

// Envio da pergunta
btnEnviar.addEventListener("click", async () => {
    const prompt = promptInput.value.trim();
    if (!prompt) { alert("Digite algo para enviar ao Gemini!"); return; }

    btnTexto.style.display = "none";
    btnSpinner.classList.remove("d-none");
    btnEnviar.disabled = true;

    respostaDiv.style.display = "none";
    perguntaDiv.style.display = "none";

    try {
        const response = await fetch(
            `https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent?key=${API_KEY}`,
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),
            }
        );
        const data = await response.json();

        if (data?.candidates?.[0]?.content?.parts?.[0]?.text) {
            perguntaDiv.innerHTML = `<b>Pergunta:</b><br>${prompt}`;
            perguntaDiv.style.display = "block";
            respostaDiv.innerHTML = `<b>Resposta:</b><br>${data.candidates[0].content.parts[0].text}`;
            respostaDiv.style.display = "block";
            promptInput.value = '';
        } else if (data.error) {
            respostaDiv.innerHTML = "‚ùå Erro: " + data.error.message;
            respostaDiv.style.display = "block";
        } else {
            respostaDiv.innerHTML = "‚ö†Ô∏è Nenhuma resposta recebida.";
            respostaDiv.style.display = "block";
        }
    } catch (error) {
        respostaDiv.innerHTML = "‚ùå Erro ao conectar com Gemini: " + error.message;
        respostaDiv.style.display = "block";
    }

    btnTexto.style.display = "inline";
    btnSpinner.classList.add("d-none");
    btnEnviar.disabled = false;
});
</script>
</body>
</html>
